{"ast":null,"code":"import{PDFDocument,StandardFonts,rgb}from'pdf-lib';// FunÃ§Ã£o para desenhar histÃ³rico de ediÃ§Ãµes na Ãºltima pÃ¡gina do PDF\nexport function addEditHistoryToPdf(page,font,editHistory){if(!editHistory||!Array.isArray(editHistory)||editHistory.length===0)return;const{width}=page.getSize();const fontSize=10;let y=60;// RodapÃ©, ajustÃ¡vel\npage.drawText('HistÃ³rico de EdiÃ§Ãµes:',{x:50,y,size:fontSize+2,font,color:rgb(0.2,0.2,0.2)});y-=18;editHistory.forEach(entry=>{// entry: { date, user, before, after }\nconst line=\"\".concat(entry.date,\" \").concat(entry.user,\" Modificou\\n\").concat(entry.before,\" para \").concat(entry.after);page.drawText(line,{x:50,y,size:fontSize,font,color:rgb(0.2,0.2,0.2)});y-=16;});}export const colWidths=[150,170,60,60,60];export const pageSize=[600,800];export const xStart=50;export const yStart=680;export const obsColWidth=[500];export const obsRowHeight=25;export const obsRows=5;export const obsTableHeight=obsRows*obsRowHeight;export const obsXStart=xStart;export const obsYStart=yStart;export const spaceBetweenTables=20;export async function addHeader(page,font,title){let imageBytes=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let pathFilename=arguments.length>4?arguments[4]:undefined;console.log(\"ðŸŽ¯ addHeader chamado:\",{title,hasImage:!!imageBytes,pathFilename});const{width,height}=page.getSize();// Desenhar o tÃ­tulo (nome do documento) no topo ao centro - sÃ³ se nÃ£o for o tÃ­tulo padrÃ£o\nif(title&&title.trim()!==''&&title!=='Procedimento'){const titleSize=14;const titleWidth=font.widthOfTextAtSize(title,titleSize);const titleX=(width-titleWidth)/2;const titleY=height-40;page.drawText(title,{x:titleX,y:titleY,size:titleSize,font,color:rgb(0,0,0)});}// Desenhar pathFilename no canto extremo direito em duas linhas\nif(pathFilename){const fileFontSize=12;// Normaliza separadores (Windows \\ -> /) e divide em pasta/arquivo\nconst normalizedPath=pathFilename.replace(/\\\\/g,'/');const parts=normalizedPath.split('/');const filename=parts.pop()||normalizedPath;// Nome do arquivo\nconst folder=parts.join('/');// Pasta(s)\nconst marginRight=50;// Mais para a esquerda (era 10, agora 50)\n// Primeira linha (pasta) - mais em baixo\nif(folder){const folderWidth=font.widthOfTextAtSize(folder,fileFontSize);const folderX=width-folderWidth-marginRight;const folderY=height-60;// Mais em baixo (era -20, agora -60)\npage.drawText(folder,{x:folderX,y:folderY,size:fileFontSize,font:font,color:rgb(0.6,0.6,0.6)// Cinzento mais claro para a pasta\n});}// Segunda linha (nome do arquivo) - ainda mais em baixo\nconst filenameWidth=font.widthOfTextAtSize(filename,fileFontSize);const filenameX=width-filenameWidth-marginRight;const filenameY=height-75;// Mais em baixo (era -35, agora -75)\npage.drawText(filename,{x:filenameX,y:filenameY,size:fileFontSize,font:font,color:rgb(0.3,0.3,0.3)// Cinzento mais escuro para o arquivo\n});}if(imageBytes){try{let image;const bytes=new Uint8Array(imageBytes);if(bytes[0]===0x89&&bytes[1]===0x50&&bytes[2]===0x4E&&bytes[3]===0x47){console.log(\" Detectado PNG\");image=await page.doc.embedPng(imageBytes);}else if(bytes[0]===0xFF&&bytes[1]===0xD8&&bytes[2]===0xFF){console.log(\" Detectado JPEG\");image=await page.doc.embedJpg(imageBytes);}else{console.warn(\" Formato nÃ£o suportado\");return;}const imageX=20;const imageY=height-150;const imageWidth=230;const imageHeight=160;page.drawImage(image,{x:imageX,y:imageY,width:imageWidth,height:imageHeight});console.log(\" Imagem adicionada!\");}catch(error){console.error(\" Erro ao adicionar imagem:\",error);}}// Removido o separador horizontal para nÃ£o repetir em todas as pÃ¡ginas\n}export async function createBasePdf(title,imageBytes,pathFilename){const pdfDoc=await PDFDocument.create();const page=pdfDoc.addPage(pageSize);const font=await pdfDoc.embedFont(StandardFonts.Helvetica);await addHeader(page,font,title,imageBytes,pathFilename);// FunÃ§Ã£o para desenhar histÃ³rico de ediÃ§Ãµes na Ãºltima pÃ¡gina do PDF\n// FunÃ§Ã£o para desenhar histÃ³rico de ediÃ§Ãµes na Ãºltima pÃ¡gina do PDF\nfunction addEditHistoryToPdf(page,font,editHistory){if(!editHistory||!Array.isArray(editHistory)||editHistory.length===0)return;const{width}=page.getSize();const fontSize=10;let y=60;// RodapÃ©, ajustÃ¡vel\npage.drawText('HistÃ³rico de EdiÃ§Ãµes:',{x:50,y,size:fontSize+2,font,color:rgb(0.2,0.2,0.2)});y-=18;editHistory.forEach(entry=>{// entry: { date, user, before, after }\nconst line=\"\".concat(entry.date,\" \").concat(entry.user,\" Modificou\\n\").concat(entry.before,\" para \").concat(entry.after);page.drawText(line,{x:50,y,size:fontSize,font,color:rgb(0.2,0.2,0.2)});y-=16;});}return{pdfDoc,page,font};}export function wrapText(text,font,fontSize,maxWidth){if(!text||text.toString().trim()==='')return[''];const textStr=text.toString();// Primeiro, divide por quebras de linha manuais (\\n)\nconst paragraphs=textStr.split('\\n');const allLines=[];paragraphs.forEach(paragraph=>{if(paragraph.trim()===''){allLines.push('');// Preserva linhas vazias\nreturn;}const words=paragraph.split(/\\s+/);const lines=[];let currentLine='';words.forEach(word=>{if(!word.trim())return;// Ignora palavras vazias\nconst testLine=currentLine?\"\".concat(currentLine,\" \").concat(word):word;const testWidth=font.widthOfTextAtSize(testLine,fontSize);if(testWidth<=maxWidth){currentLine=testLine;}else{if(currentLine){lines.push(currentLine);currentLine=word;}else{// Se uma palavra individual Ã© maior que maxWidth\n// Tenta quebrar a palavra por caracteres\nconst chars=word.split('');let partialWord='';chars.forEach(char=>{const testChar=partialWord+char;const charWidth=font.widthOfTextAtSize(testChar,fontSize);if(charWidth<=maxWidth){partialWord=testChar;}else{if(partialWord){lines.push(partialWord);partialWord=char;}else{lines.push(char);// ForÃ§a pelo menos um caractere\n}}});if(partialWord){currentLine=partialWord;}}}});if(currentLine){lines.push(currentLine);}// Adiciona as linhas deste parÃ¡grafo ao resultado final\nallLines.push(...lines);});return allLines.length>0?allLines:[''];}","map":{"version":3,"names":["PDFDocument","StandardFonts","rgb","addEditHistoryToPdf","page","font","editHistory","Array","isArray","length","width","getSize","fontSize","y","drawText","x","size","color","forEach","entry","line","concat","date","user","before","after","colWidths","pageSize","xStart","yStart","obsColWidth","obsRowHeight","obsRows","obsTableHeight","obsXStart","obsYStart","spaceBetweenTables","addHeader","title","imageBytes","arguments","undefined","pathFilename","console","log","hasImage","height","trim","titleSize","titleWidth","widthOfTextAtSize","titleX","titleY","fileFontSize","normalizedPath","replace","parts","split","filename","pop","folder","join","marginRight","folderWidth","folderX","folderY","filenameWidth","filenameX","filenameY","image","bytes","Uint8Array","doc","embedPng","embedJpg","warn","imageX","imageY","imageWidth","imageHeight","drawImage","error","createBasePdf","pdfDoc","create","addPage","embedFont","Helvetica","wrapText","text","maxWidth","toString","textStr","paragraphs","allLines","paragraph","push","words","lines","currentLine","word","testLine","testWidth","chars","partialWord","char","testChar","charWidth"],"sources":["C:/Users/AntÃ³nio GonÃ§alves/Desktop/Magna-ISO9001-Frontend/src/utils/pdfBase.js"],"sourcesContent":["\r\nimport { PDFDocument, StandardFonts, rgb } from 'pdf-lib';\r\n\r\n// FunÃ§Ã£o para desenhar histÃ³rico de ediÃ§Ãµes na Ãºltima pÃ¡gina do PDF\r\nexport function addEditHistoryToPdf(page, font, editHistory) {\r\n  if (!editHistory || !Array.isArray(editHistory) || editHistory.length === 0) return;\r\n  const { width } = page.getSize();\r\n  const fontSize = 10;\r\n  let y = 60; // RodapÃ©, ajustÃ¡vel\r\n  page.drawText('HistÃ³rico de EdiÃ§Ãµes:', {\r\n    x: 50,\r\n    y,\r\n    size: fontSize + 2,\r\n    font,\r\n    color: rgb(0.2, 0.2, 0.2),\r\n  });\r\n  y -= 18;\r\n  editHistory.forEach((entry) => {\r\n    // entry: { date, user, before, after }\r\n    const line = `${entry.date} ${entry.user} Modificou\\n${entry.before} para ${entry.after}`;\r\n    page.drawText(line, {\r\n      x: 50,\r\n      y,\r\n      size: fontSize,\r\n      font,\r\n      color: rgb(0.2, 0.2, 0.2),\r\n    });\r\n    y -= 16;\r\n  });\r\n}\r\n\r\nexport const colWidths = [150, 170, 60, 60, 60];\r\nexport const pageSize = [600, 800];\r\nexport const xStart = 50;\r\nexport const yStart = 680;\r\n\r\nexport const obsColWidth = [500];\r\nexport const obsRowHeight = 25;\r\nexport const obsRows = 5;\r\nexport const obsTableHeight = obsRows * obsRowHeight;\r\nexport const obsXStart = xStart;\r\nexport const obsYStart = yStart;\r\n\r\nexport const spaceBetweenTables = 20;\r\n\r\nexport async function addHeader(page, font, title, imageBytes = null, pathFilename) {\r\n  console.log(\"ðŸŽ¯ addHeader chamado:\", { title, hasImage: !!imageBytes, pathFilename });\r\n\r\n  const { width, height } = page.getSize();\r\n  \r\n  // Desenhar o tÃ­tulo (nome do documento) no topo ao centro - sÃ³ se nÃ£o for o tÃ­tulo padrÃ£o\r\n  if (title && title.trim() !== '' && title !== 'Procedimento') {\r\n    const titleSize = 14;\r\n    const titleWidth = font.widthOfTextAtSize(title, titleSize);\r\n    const titleX = (width - titleWidth) / 2;\r\n    const titleY = height - 40;\r\n    page.drawText(title, {\r\n      x: titleX,\r\n      y: titleY,\r\n      size: titleSize,\r\n      font,\r\n      color: rgb(0, 0, 0),\r\n    });\r\n  }\r\n  \r\n  // Desenhar pathFilename no canto extremo direito em duas linhas\r\n    if (pathFilename) {\r\n      const fileFontSize = 12;\r\n      // Normaliza separadores (Windows \\ -> /) e divide em pasta/arquivo\r\n      const normalizedPath = pathFilename.replace(/\\\\/g, '/');\r\n      const parts = normalizedPath.split('/');\r\n      const filename = parts.pop() || normalizedPath; // Nome do arquivo\r\n      const folder = parts.join('/'); // Pasta(s)\r\n      \r\n      const marginRight = 50; // Mais para a esquerda (era 10, agora 50)\r\n      \r\n      // Primeira linha (pasta) - mais em baixo\r\n      if (folder) {\r\n        const folderWidth = font.widthOfTextAtSize(folder, fileFontSize);\r\n        const folderX = width - folderWidth - marginRight;\r\n        const folderY = height - 60; // Mais em baixo (era -20, agora -60)\r\n      \r\n      page.drawText(folder, {\r\n        x: folderX,\r\n        y: folderY,\r\n        size: fileFontSize,\r\n        font: font,\r\n        color: rgb(0.6, 0.6, 0.6), // Cinzento mais claro para a pasta\r\n      });\r\n    }\r\n    \r\n    // Segunda linha (nome do arquivo) - ainda mais em baixo\r\n  const filenameWidth = font.widthOfTextAtSize(filename, fileFontSize);\r\n    const filenameX = width - filenameWidth - marginRight;\r\n    const filenameY = height - 75; // Mais em baixo (era -35, agora -75)\r\n    \r\n    page.drawText(filename, {\r\n      x: filenameX,\r\n      y: filenameY,\r\n      size: fileFontSize,\r\n      font: font,\r\n      color: rgb(0.3, 0.3, 0.3), // Cinzento mais escuro para o arquivo\r\n    });\r\n  }\r\n  \r\n  if (imageBytes) {\r\n    try {\r\n      let image;\r\n      const bytes = new Uint8Array(imageBytes);\r\n      \r\n      if (bytes[0] === 0x89 && bytes[1] === 0x50 && bytes[2] === 0x4E && bytes[3] === 0x47) {\r\n        console.log(\" Detectado PNG\");\r\n        image = await page.doc.embedPng(imageBytes);\r\n      }\r\n      else if (bytes[0] === 0xFF && bytes[1] === 0xD8 && bytes[2] === 0xFF) {\r\n        console.log(\" Detectado JPEG\");\r\n        image = await page.doc.embedJpg(imageBytes);\r\n      } else {\r\n        console.warn(\" Formato nÃ£o suportado\");\r\n        return;\r\n      }\r\n      \r\n      const imageX = 20;\r\n      const imageY = height - 150;\r\n      \r\n      const imageWidth = 230;\r\n      const imageHeight = 160;\r\n\r\n      page.drawImage(image, {\r\n        x: imageX,\r\n        y: imageY,\r\n        width: imageWidth,\r\n        height: imageHeight,\r\n      });\r\n      \r\n      console.log(\" Imagem adicionada!\");\r\n      \r\n    } catch (error) {\r\n      console.error(\" Erro ao adicionar imagem:\", error);\r\n    }\r\n  }\r\n  \r\n  // Removido o separador horizontal para nÃ£o repetir em todas as pÃ¡ginas\r\n}\r\n\r\nexport async function createBasePdf(title, imageBytes, pathFilename) {\r\n  const pdfDoc = await PDFDocument.create();\r\n  const page = pdfDoc.addPage(pageSize);\r\n  const font = await pdfDoc.embedFont(StandardFonts.Helvetica);\r\n  \r\n  await addHeader(page, font, title, imageBytes, pathFilename);\r\n  \r\n    // FunÃ§Ã£o para desenhar histÃ³rico de ediÃ§Ãµes na Ãºltima pÃ¡gina do PDF\r\n\r\n  // FunÃ§Ã£o para desenhar histÃ³rico de ediÃ§Ãµes na Ãºltima pÃ¡gina do PDF\r\n  function addEditHistoryToPdf(page, font, editHistory) {\r\n    if (!editHistory || !Array.isArray(editHistory) || editHistory.length === 0) return;\r\n    const { width } = page.getSize();\r\n    const fontSize = 10;\r\n    let y = 60; // RodapÃ©, ajustÃ¡vel\r\n    page.drawText('HistÃ³rico de EdiÃ§Ãµes:', {\r\n      x: 50,\r\n      y,\r\n      size: fontSize + 2,\r\n      font,\r\n      color: rgb(0.2, 0.2, 0.2),\r\n    });\r\n    y -= 18;\r\n    editHistory.forEach((entry) => {\r\n      // entry: { date, user, before, after }\r\n      const line = `${entry.date} ${entry.user} Modificou\\n${entry.before} para ${entry.after}`;\r\n      page.drawText(line, {\r\n        x: 50,\r\n        y,\r\n        size: fontSize,\r\n        font,\r\n        color: rgb(0.2, 0.2, 0.2),\r\n      });\r\n      y -= 16;\r\n    });\r\n  }\r\n  \r\n  return { pdfDoc, page, font };\r\n}\r\n\r\nexport function wrapText(text, font, fontSize, maxWidth) {\r\n  if (!text || text.toString().trim() === '') return [''];\r\n  \r\n  const textStr = text.toString();\r\n  \r\n  // Primeiro, divide por quebras de linha manuais (\\n)\r\n  const paragraphs = textStr.split('\\n');\r\n  const allLines = [];\r\n  \r\n  paragraphs.forEach(paragraph => {\r\n    if (paragraph.trim() === '') {\r\n      allLines.push(''); // Preserva linhas vazias\r\n      return;\r\n    }\r\n    \r\n    const words = paragraph.split(/\\s+/);\r\n    const lines = [];\r\n    let currentLine = '';\r\n    \r\n    words.forEach(word => {\r\n      if (!word.trim()) return; // Ignora palavras vazias\r\n      \r\n      const testLine = currentLine ? `${currentLine} ${word}` : word;\r\n      const testWidth = font.widthOfTextAtSize(testLine, fontSize);\r\n      \r\n      if (testWidth <= maxWidth) {\r\n        currentLine = testLine;\r\n      } else {\r\n        if (currentLine) {\r\n          lines.push(currentLine);\r\n          currentLine = word;\r\n        } else {\r\n          // Se uma palavra individual Ã© maior que maxWidth\r\n          // Tenta quebrar a palavra por caracteres\r\n          const chars = word.split('');\r\n          let partialWord = '';\r\n          \r\n          chars.forEach(char => {\r\n            const testChar = partialWord + char;\r\n            const charWidth = font.widthOfTextAtSize(testChar, fontSize);\r\n            \r\n            if (charWidth <= maxWidth) {\r\n              partialWord = testChar;\r\n            } else {\r\n              if (partialWord) {\r\n                lines.push(partialWord);\r\n                partialWord = char;\r\n              } else {\r\n                lines.push(char); // ForÃ§a pelo menos um caractere\r\n              }\r\n            }\r\n          });\r\n          \r\n          if (partialWord) {\r\n            currentLine = partialWord;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    \r\n    if (currentLine) {\r\n      lines.push(currentLine);\r\n    }\r\n    \r\n    // Adiciona as linhas deste parÃ¡grafo ao resultado final\r\n    allLines.push(...lines);\r\n  });\r\n  \r\n  return allLines.length > 0 ? allLines : [''];\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}