{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import'./MultiSelectDonos.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MultiSelectDonos=_ref=>{let{funcionarios=[],donoProcesso=\"\",setDonoProcesso,isEditable=false,isSuperAdmin=false,donoProcessoAlterado=false}=_ref;const[isOpen,setIsOpen]=useState(false);const dropdownRef=useRef(null);// Converte a string de donos em array\nconst donosArray=donoProcesso?donoProcesso.split(',').map(nome=>nome.trim()).filter(nome=>nome):[];// Fecha o dropdown ao clicar fora\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// Toggle de seleção de funcionário\nconst toggleFuncionario=nomeFuncionario=>{if(!isEditable||!isSuperAdmin)return;let novosDonosArray;if(donosArray.includes(nomeFuncionario)){// Remove o funcionário\nnovosDonosArray=donosArray.filter(nome=>nome!==nomeFuncionario);}else{// Adiciona o funcionário\nnovosDonosArray=[...donosArray,nomeFuncionario];}// Converte de volta para string\nconst novosDonosString=novosDonosArray.join(', ');setDonoProcesso(novosDonosString);};// Remove um dono específico\nconst removeDono=(nomeDono,event)=>{event.stopPropagation();if(!isEditable||!isSuperAdmin)return;const novosDonosArray=donosArray.filter(nome=>nome!==nomeDono);const novosDonosString=novosDonosArray.join(', ');setDonoProcesso(novosDonosString);};const isDisabled=!isEditable||!isSuperAdmin;return/*#__PURE__*/_jsxs(\"div\",{className:\"multi-select-container\",ref:dropdownRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"multi-select-input \".concat(donoProcessoAlterado?'altered':'',\" \").concat(isDisabled?'disabled':''),onClick:()=>!isDisabled&&setIsOpen(!isOpen),children:[/*#__PURE__*/_jsx(\"div\",{className:\"selected-donos\",children:donosArray.length===0?/*#__PURE__*/_jsx(\"span\",{className:\"placeholder\",children:\"Selecione os donos do processo...\"}):donosArray.map((dono,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"dono-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:dono}),!isDisabled&&/*#__PURE__*/_jsx(\"button\",{className:\"remove-dono-btn\",onClick:e=>removeDono(dono,e),type:\"button\",children:\"\\xD7\"})]},index))}),!isDisabled&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-arrow \".concat(isOpen?'open':''),children:\"\\u25BC\"})]}),isOpen&&!isDisabled&&/*#__PURE__*/_jsx(\"div\",{className:\"multi-select-dropdown\",children:funcionarios.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-item disabled\",children:\"Nenhum funcion\\xE1rio dispon\\xEDvel\"}):funcionarios.map(funcionario=>/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item \".concat(donosArray.includes(funcionario.nome)?'selected':''),onClick:()=>toggleFuncionario(funcionario.nome),children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:donosArray.includes(funcionario.nome),onChange:()=>{}// Controlled by onClick\n,readOnly:true}),/*#__PURE__*/_jsx(\"span\",{children:funcionario.nome})]},funcionario.id))}),donoProcessoAlterado&&/*#__PURE__*/_jsx(\"div\",{className:\"alteration-badge\",children:\"Alterado\"})]});};export default MultiSelectDonos;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","MultiSelectDonos","_ref","funcionarios","donoProcesso","setDonoProcesso","isEditable","isSuperAdmin","donoProcessoAlterado","isOpen","setIsOpen","dropdownRef","donosArray","split","map","nome","trim","filter","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","toggleFuncionario","nomeFuncionario","novosDonosArray","includes","novosDonosString","join","removeDono","nomeDono","stopPropagation","isDisabled","className","ref","children","concat","onClick","length","dono","index","e","type","funcionario","checked","onChange","readOnly","id"],"sources":["C:/Users/António Gonçalves/Desktop/Magna-ISO9001-Frontend/src/components/MultiSelectDonos.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport './MultiSelectDonos.css';\r\n\r\nconst MultiSelectDonos = ({ \r\n  funcionarios = [], \r\n  donoProcesso = \"\", \r\n  setDonoProcesso, \r\n  isEditable = false, \r\n  isSuperAdmin = false,\r\n  donoProcessoAlterado = false \r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  // Converte a string de donos em array\r\n  const donosArray = donoProcesso ? donoProcesso.split(',').map(nome => nome.trim()).filter(nome => nome) : [];\r\n\r\n  // Fecha o dropdown ao clicar fora\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  // Toggle de seleção de funcionário\r\n  const toggleFuncionario = (nomeFuncionario) => {\r\n    if (!isEditable || !isSuperAdmin) return;\r\n\r\n    let novosDonosArray;\r\n    \r\n    if (donosArray.includes(nomeFuncionario)) {\r\n      // Remove o funcionário\r\n      novosDonosArray = donosArray.filter(nome => nome !== nomeFuncionario);\r\n    } else {\r\n      // Adiciona o funcionário\r\n      novosDonosArray = [...donosArray, nomeFuncionario];\r\n    }\r\n\r\n    // Converte de volta para string\r\n    const novosDonosString = novosDonosArray.join(', ');\r\n    setDonoProcesso(novosDonosString);\r\n  };\r\n\r\n  // Remove um dono específico\r\n  const removeDono = (nomeDono, event) => {\r\n    event.stopPropagation();\r\n    if (!isEditable || !isSuperAdmin) return;\r\n\r\n    const novosDonosArray = donosArray.filter(nome => nome !== nomeDono);\r\n    const novosDonosString = novosDonosArray.join(', ');\r\n    setDonoProcesso(novosDonosString);\r\n  };\r\n\r\n  const isDisabled = !isEditable || !isSuperAdmin;\r\n\r\n  return (\r\n    <div className=\"multi-select-container\" ref={dropdownRef}>\r\n      <div \r\n        className={`multi-select-input ${donoProcessoAlterado ? 'altered' : ''} ${isDisabled ? 'disabled' : ''}`}\r\n        onClick={() => !isDisabled && setIsOpen(!isOpen)}\r\n      >\r\n        <div className=\"selected-donos\">\r\n          {donosArray.length === 0 ? (\r\n            <span className=\"placeholder\">Selecione os donos do processo...</span>\r\n          ) : (\r\n            donosArray.map((dono, index) => (\r\n              <div key={index} className=\"dono-tag\">\r\n                <span>{dono}</span>\r\n                {!isDisabled && (\r\n                  <button \r\n                    className=\"remove-dono-btn\"\r\n                    onClick={(e) => removeDono(dono, e)}\r\n                    type=\"button\"\r\n                  >\r\n                    ×\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n        {!isDisabled && (\r\n          <div className={`dropdown-arrow ${isOpen ? 'open' : ''}`}>\r\n            ▼\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {isOpen && !isDisabled && (\r\n        <div className=\"multi-select-dropdown\">\r\n          {funcionarios.length === 0 ? (\r\n            <div className=\"dropdown-item disabled\">Nenhum funcionário disponível</div>\r\n          ) : (\r\n            funcionarios.map((funcionario) => (\r\n              <div\r\n                key={funcionario.id}\r\n                className={`dropdown-item ${donosArray.includes(funcionario.nome) ? 'selected' : ''}`}\r\n                onClick={() => toggleFuncionario(funcionario.nome)}\r\n              >\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={donosArray.includes(funcionario.nome)}\r\n                  onChange={() => {}} // Controlled by onClick\r\n                  readOnly\r\n                />\r\n                <span>{funcionario.nome}</span>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {donoProcessoAlterado && (\r\n        <div className=\"alteration-badge\">\r\n          Alterado\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MultiSelectDonos;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}