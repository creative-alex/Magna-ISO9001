{"ast":null,"code":"import _objectSpread from\"C:/Users/Ant\\xF3nio Gon\\xE7alves/Desktop/Magna-ISO9001-Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import{UserContext}from\"../context/userContext\";import FilePreviewButton from\"../components/Buttons/pdfPreviewButton\";import AddUserButton from\"../components/Buttons/addUserButton\";import AddProcessButton from\"../components/Buttons/addProcessButton\";import DeleteButton from\"../components/Buttons/delete\";import CreateTableButton from\"../components/Buttons/createTableButton\";import AIAssistant from\"../components/AIAssistant/AIAssistant\";import Logo from\"../logo.svg\";import Ver from\"../icons/ver.ico\";import\"../index.css\";// Função recursiva para filtrar nodes por nome\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function filterTree(nodes,searchTerm){if(!searchTerm)return nodes;return nodes.map(node=>{if(node.type===\"folder\"){const filteredChildren=filterTree(node.children||[],searchTerm);if(filteredChildren.length>0||node.name.toLowerCase().includes(searchTerm.toLowerCase())){return _objectSpread(_objectSpread({},node),{},{children:filteredChildren});}return null;}if(node.name.toLowerCase().includes(searchTerm.toLowerCase())){return node;}return null;}).filter(Boolean);}function FolderStructure(_ref){let{nodes,onSelectFile,currentPath=[],processOwners,currentUser,isAdmin,onDelete}=_ref;const[expandedFolder,setExpandedFolder]=useState(null);// Função para ordenar nós: arquivos primeiro, depois pastas \"Informação documentada\" correspondentes\nconst sortNodes=nodes=>{const folders=nodes.filter(n=>n.type===\"folder\");const files=nodes.filter(n=>n.type===\"file\");// Função para extrair número de um nome\nconst extractNumber=name=>{// Primeiro tenta encontrar número no início\nlet match=name.match(/^(\\d+)/);if(match)return match[1];// Se não encontrar no início, procura por \"procedimento XX\" ou similar\nmatch=name.match(/procedimento\\s+(\\d+)/i);if(match)return match[1];// Procura qualquer número no nome\nmatch=name.match(/(\\d+)/);if(match)return match[1];return'other';};// Cria grupos baseados nos números (ex: \"00\", \"01\", etc.)\nconst groups=new Map();// Adiciona arquivos aos grupos\nfiles.forEach(file=>{const number=extractNumber(file.name);if(!groups.has(number)){groups.set(number,{files:[],folders:[]});}groups.get(number).files.push(file);});// Adiciona pastas aos grupos\nfolders.forEach(folder=>{const number=extractNumber(folder.name);if(!groups.has(number)){groups.set(number,{files:[],folders:[]});}groups.get(number).folders.push(folder);});// Ordena os grupos numericamente\nconst sortedGroups=Array.from(groups.entries()).sort((a,b)=>{if(a[0]==='other')return 1;if(b[0]==='other')return-1;return parseInt(a[0])-parseInt(b[0]);});// Constrói a lista final: para cada grupo, arquivos primeiro, depois pastas\nconst result=[];sortedGroups.forEach(_ref2=>{let[number,group]=_ref2;// Ordena arquivos dentro do grupo\ngroup.files.sort((a,b)=>a.name.localeCompare(b.name));result.push(...group.files);// Ordena pastas dentro do grupo\ngroup.folders.sort((a,b)=>a.name.localeCompare(b.name));result.push(...group.folders);});return result;};const sortedNodes=sortNodes(nodes);const toggleFolder=folderName=>{setExpandedFolder(expandedFolder===folderName?null:folderName);};return/*#__PURE__*/_jsx(\"div\",{className:\"folder-structure\",children:sortedNodes.map(node=>{if(node.type===\"folder\"){// Para pastas de primeiro nível, mostra o dono se existir\nconst isTopLevel=currentPath.length===0;const folderOwner=isTopLevel?processOwners[node.name]:null;const isOwnerFolder=isTopLevel&&folderOwner&&folderOwner.split(',').map(nome=>nome.trim()).includes(currentUser);return/*#__PURE__*/_jsxs(\"div\",{className:\"folder \".concat(isOwnerFolder?'owner-folder':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"folder-header \".concat(expandedFolder===node.name?'active':''),onClick:()=>toggleFolder(node.name),children:[/*#__PURE__*/_jsx(\"span\",{className:\"folder-name\",children:node.name}),/*#__PURE__*/_jsx(\"div\",{className:\"folder-actions\",style:{display:'flex',alignItems:'center'},children:currentPath.length===0&&(isAdmin||folderOwner&&folderOwner.split(',').map(nome=>nome.trim()).includes(currentUser))?/*#__PURE__*/_jsx(CreateTableButton,{folderName:node.name,currentPath:currentPath}):null})]}),expandedFolder===node.name&&/*#__PURE__*/_jsx(\"div\",{className:\"folder-content\",children:/*#__PURE__*/_jsx(FolderStructure,{nodes:node.children||[],onSelectFile:onSelectFile,currentPath:[...currentPath,node.name],processOwners:processOwners,currentUser:currentUser,isAdmin:isAdmin,onDelete:onDelete})})]},node.name);}else{// node.type === \"file\"\nconst filePath=[...currentPath,node.name].join(\"/\");// Ficheiros na raiz (nível 0) e dentro de pastas (nível 1) podem ser clicáveis\n// Ficheiros em subpastas (nível 2+) NÃO podem ser clicáveis\nconst isClickableFile=currentPath.length<=1;// Remove a extensão apenas para PDFs para manter compatibilidade\nconst displayName=node.name.endsWith('.pdf')?node.name.slice(0,-4):node.name;// Verifica se o usuário pode deletar o arquivo\nconst processOwnerString=processOwners[currentPath[0]];const isProcessOwner=processOwnerString&&processOwnerString.split(',').map(nome=>nome.trim()).includes(currentUser);const canDelete=isAdmin||isProcessOwner;return/*#__PURE__*/_jsxs(\"div\",{className:\"file \".concat(isClickableFile?'file-clickable':''),onClick:isClickableFile?()=>onSelectFile(filePath):undefined,style:{cursor:isClickableFile?'pointer':'default'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"file-name\",children:displayName}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-actions\",children:[/*#__PURE__*/_jsx(FilePreviewButton,{file:node,currentPath:currentPath}),canDelete&&/*#__PURE__*/_jsx(DeleteButton,{file:node,currentPath:currentPath,onDelete:onDelete})]})]},node.name);}})});}export default function SelecionarPdf(){const[fileTree,setFileTree]=useState([]);const[searchTerm,setSearchTerm]=useState(\"\");const[processOwners,setProcessOwners]=useState({});const[showLogoutModal,setShowLogoutModal]=useState(false);const navigate=useNavigate();const{username,logout}=useContext(UserContext);// Verifica se é SuperAdmin\nconst isAdmin=username===\"superadmin\"||username===\"SuperAdmin\";// Função para fazer logout\nconst handleLogout=async()=>{setShowLogoutModal(true);};const confirmLogout=async()=>{setShowLogoutModal(false);await logout();navigate(\"/\",{replace:true});};const cancelLogout=()=>{setShowLogoutModal(false);};useEffect(()=>{// Busca a árvore de ficheiros\nfetch(\"http://192.168.1.219:8080/files/list-files-tree\").then(res=>res.json()).then(setFileTree).catch(()=>setFileTree([]));// Busca os donos dos processos\nfetch(\"http://192.168.1.219:8080/files/process-owners\").then(res=>res.json()).then(setProcessOwners).catch(()=>setProcessOwners({}));},[]);// Função para recarregar a árvore de ficheiros após eliminação\nconst reloadFileTree=()=>{fetch(\"http://192.168.1.219:8080/files/list-files-tree\").then(res=>res.json()).then(setFileTree).catch(()=>setFileTree([]));};const handleSelectFile=filePath=>{// Substituir espaços por '-', barras por '__'\nconst formattedPath=filePath.replace(/\\s/g,'-').replace(/\\//g,'__');// Determinar processo a partir do caminho do ficheiro\nconst pathParts=filePath.split('/');const processName=pathParts[0];// Assume que primeiro nível é o processo\n// Função utilitária para verificar se um usuário está na lista de donos do processo\nconst isUserProcessOwner=(processOwnerString,username)=>{if(!processOwnerString||!username)return false;const donosArray=processOwnerString.split(',').map(nome=>nome.trim()).filter(nome=>nome);return donosArray.includes(username);};// Verificar se user pode editar este processo\nconst processOwner=processOwners[processName];const canEdit=isAdmin||isUserProcessOwner(processOwner,username);navigate(\"/file/\".concat(formattedPath),{state:{originalFilename:filePath,canEdit:canEdit,isSuperAdmin:isAdmin}});};// Filtra a árvore conforme o termo de busca\nconst filteredTree=filterTree(fileTree,searchTerm);return/*#__PURE__*/_jsxs(\"div\",{className:\"file-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"Logo\",className:\"logo\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Magna ISO90001\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Encontrar arquivo ou pasta...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center',width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-title\",children:\"\\xCDndice\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'center'},children:[username&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'14px',color:'#666'},children:[\"Ol\\xE1, \",username]}),isAdmin&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-buttons\",style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(AddUserButton,{}),/*#__PURE__*/_jsx(AddProcessButton,{})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{padding:'8px 12px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'14px'},onMouseOver:e=>e.target.style.backgroundColor='#c82333',onMouseOut:e=>e.target.style.backgroundColor='#dc3545',children:\"Sair\"})]})]}),/*#__PURE__*/_jsx(FolderStructure,{nodes:filteredTree,onSelectFile:handleSelectFile,processOwners:processOwners,currentUser:username,isAdmin:isAdmin,onDelete:reloadFileTree})]}),/*#__PURE__*/_jsx(AIAssistant,{fileTree:filteredTree,searchTerm:searchTerm,username:username,isAdmin:isAdmin,processOwners:processOwners,onSuggestion:suggestion=>{console.log('AI Suggestion:',suggestion);}}),showLogoutModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:1000,animation:'fadeIn 0.2s ease-out'},children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',borderRadius:'12px',padding:'24px',minWidth:'320px',maxWidth:'400px',boxShadow:'0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',animation:'slideIn 0.3s ease-out',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px'},children:\"\\uD83D\\uDC4B\"}),/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 8px 0',fontSize:'18px',fontWeight:'600',color:'#1f2937'},children:\"Confirmar Sa\\xEDda\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 24px 0',color:'#6b7280',fontSize:'14px',lineHeight:'1.5'},children:\"Tem certeza que deseja terminar a sua sess\\xE3o?\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelLogout,style:{padding:'10px 20px',backgroundColor:'#f3f4f6',color:'#374151',border:'none',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'500',transition:'all 0.2s ease'},onMouseOver:e=>e.target.style.backgroundColor='#e5e7eb',onMouseOut:e=>e.target.style.backgroundColor='#f3f4f6',children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmLogout,style:{padding:'10px 20px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'500',transition:'all 0.2s ease'},onMouseOver:e=>e.target.style.backgroundColor='#c82333',onMouseOut:e=>e.target.style.backgroundColor='#dc3545',children:\"Sim, Sair\"})]})]})}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n        @keyframes fadeIn {\\n          from { opacity: 0; }\\n          to { opacity: 1; }\\n        }\\n        \\n        @keyframes slideIn {\\n          from { \\n            opacity: 0;\\n            transform: translateY(-20px) scale(0.95);\\n          }\\n          to { \\n            opacity: 1;\\n            transform: translateY(0) scale(1);\\n          }\\n        }\\n      \"})]});};","map":{"version":3,"names":["React","useEffect","useState","useContext","useNavigate","UserContext","FilePreviewButton","AddUserButton","AddProcessButton","DeleteButton","CreateTableButton","AIAssistant","Logo","Ver","jsx","_jsx","jsxs","_jsxs","filterTree","nodes","searchTerm","map","node","type","filteredChildren","children","length","name","toLowerCase","includes","_objectSpread","filter","Boolean","FolderStructure","_ref","onSelectFile","currentPath","processOwners","currentUser","isAdmin","onDelete","expandedFolder","setExpandedFolder","sortNodes","folders","n","files","extractNumber","match","groups","Map","forEach","file","number","has","set","get","push","folder","sortedGroups","Array","from","entries","sort","a","b","parseInt","result","_ref2","group","localeCompare","sortedNodes","toggleFolder","folderName","className","isTopLevel","folderOwner","isOwnerFolder","split","nome","trim","concat","onClick","style","display","alignItems","filePath","join","isClickableFile","displayName","endsWith","slice","processOwnerString","isProcessOwner","canDelete","undefined","cursor","SelecionarPdf","fileTree","setFileTree","setSearchTerm","setProcessOwners","showLogoutModal","setShowLogoutModal","navigate","username","logout","handleLogout","confirmLogout","replace","cancelLogout","fetch","then","res","json","catch","reloadFileTree","handleSelectFile","formattedPath","pathParts","processName","isUserProcessOwner","donosArray","processOwner","canEdit","state","originalFilename","isSuperAdmin","filteredTree","src","alt","placeholder","value","onChange","e","target","justifyContent","width","gap","fontSize","color","padding","backgroundColor","border","borderRadius","onMouseOver","onMouseOut","onSuggestion","suggestion","console","log","position","top","left","right","bottom","zIndex","animation","minWidth","maxWidth","boxShadow","textAlign","marginBottom","margin","fontWeight","lineHeight","transition"],"sources":["C:/Users/António Gonçalves/Desktop/Magna-ISO9001-Frontend/src/pages/selectPdf.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { UserContext } from \"../context/userContext\";\r\nimport FilePreviewButton from \"../components/Buttons/pdfPreviewButton\";\r\nimport AddUserButton from \"../components/Buttons/addUserButton\";\r\nimport AddProcessButton from \"../components/Buttons/addProcessButton\";\r\nimport DeleteButton from \"../components/Buttons/delete\";\r\nimport CreateTableButton from \"../components/Buttons/createTableButton\";\r\nimport AIAssistant from \"../components/AIAssistant/AIAssistant\";\r\nimport Logo from \"../logo.svg\"\r\nimport Ver from \"../icons/ver.ico\"\r\nimport \"../index.css\";\r\n\r\n// Função recursiva para filtrar nodes por nome\r\nfunction filterTree(nodes, searchTerm) {\r\n  if (!searchTerm) return nodes;\r\n  return nodes\r\n    .map(node => {\r\n      if (node.type === \"folder\") {\r\n        const filteredChildren = filterTree(node.children || [], searchTerm);\r\n        if (filteredChildren.length > 0 || node.name.toLowerCase().includes(searchTerm.toLowerCase())) {\r\n          return { ...node, children: filteredChildren };\r\n        }\r\n        return null;\r\n      }\r\n      if (node.name.toLowerCase().includes(searchTerm.toLowerCase())) {\r\n        return node;\r\n      }\r\n      return null;\r\n    })\r\n    .filter(Boolean);\r\n}\r\n\r\nfunction FolderStructure({ nodes, onSelectFile, currentPath = [], processOwners, currentUser, isAdmin, onDelete }) {\r\n  const [expandedFolder, setExpandedFolder] = useState(null);\r\n\r\n  // Função para ordenar nós: arquivos primeiro, depois pastas \"Informação documentada\" correspondentes\r\n  const sortNodes = (nodes) => {\r\n    const folders = nodes.filter(n => n.type === \"folder\");\r\n    const files = nodes.filter(n => n.type === \"file\");\r\n    \r\n    // Função para extrair número de um nome\r\n    const extractNumber = (name) => {\r\n      // Primeiro tenta encontrar número no início\r\n      let match = name.match(/^(\\d+)/);\r\n      if (match) return match[1];\r\n      \r\n      // Se não encontrar no início, procura por \"procedimento XX\" ou similar\r\n      match = name.match(/procedimento\\s+(\\d+)/i);\r\n      if (match) return match[1];\r\n      \r\n      // Procura qualquer número no nome\r\n      match = name.match(/(\\d+)/);\r\n      if (match) return match[1];\r\n      \r\n      return 'other';\r\n    };\r\n    \r\n    // Cria grupos baseados nos números (ex: \"00\", \"01\", etc.)\r\n    const groups = new Map();\r\n    \r\n    // Adiciona arquivos aos grupos\r\n    files.forEach(file => {\r\n      const number = extractNumber(file.name);\r\n      if (!groups.has(number)) {\r\n        groups.set(number, { files: [], folders: [] });\r\n      }\r\n      groups.get(number).files.push(file);\r\n    });\r\n    \r\n    // Adiciona pastas aos grupos\r\n    folders.forEach(folder => {\r\n      const number = extractNumber(folder.name);\r\n      if (!groups.has(number)) {\r\n        groups.set(number, { files: [], folders: [] });\r\n      }\r\n      groups.get(number).folders.push(folder);\r\n    });\r\n    \r\n    // Ordena os grupos numericamente\r\n    const sortedGroups = Array.from(groups.entries()).sort((a, b) => {\r\n      if (a[0] === 'other') return 1;\r\n      if (b[0] === 'other') return -1;\r\n      return parseInt(a[0]) - parseInt(b[0]);\r\n    });\r\n    \r\n    // Constrói a lista final: para cada grupo, arquivos primeiro, depois pastas\r\n    const result = [];\r\n    sortedGroups.forEach(([number, group]) => {\r\n      // Ordena arquivos dentro do grupo\r\n      group.files.sort((a, b) => a.name.localeCompare(b.name));\r\n      result.push(...group.files);\r\n      \r\n      // Ordena pastas dentro do grupo\r\n      group.folders.sort((a, b) => a.name.localeCompare(b.name));\r\n      result.push(...group.folders);\r\n    });\r\n    \r\n    return result;\r\n  };\r\n\r\n  const sortedNodes = sortNodes(nodes);\r\n\r\n  const toggleFolder = (folderName) => {\r\n    setExpandedFolder(expandedFolder === folderName ? null : folderName);\r\n  };\r\n\r\n  return (\r\n    <div className=\"folder-structure\">\r\n      {sortedNodes.map(node => {\r\n        if (node.type === \"folder\") {\r\n          // Para pastas de primeiro nível, mostra o dono se existir\r\n          const isTopLevel = currentPath.length === 0;\r\n          const folderOwner = isTopLevel ? processOwners[node.name] : null;\r\n          const isOwnerFolder = isTopLevel && folderOwner && folderOwner.split(',').map(nome => nome.trim()).includes(currentUser);\r\n          \r\n          return (\r\n            <div key={node.name} className={`folder ${isOwnerFolder ? 'owner-folder' : ''}`}>\r\n              <div\r\n                className={`folder-header ${expandedFolder === node.name ? 'active' : ''}`}\r\n                onClick={() => toggleFolder(node.name)}\r\n              >\r\n                <span className=\"folder-name\">\r\n                  {node.name}\r\n                </span>\r\n                <div className=\"folder-actions\" style={{ display: 'flex', alignItems: 'center' }}>\r\n                  {currentPath.length === 0 && (isAdmin || (folderOwner && folderOwner.split(',').map(nome => nome.trim()).includes(currentUser))) ? (\r\n                    <CreateTableButton\r\n                      folderName={node.name}\r\n                      currentPath={currentPath}\r\n                    />\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            {expandedFolder === node.name && (\r\n              <div className=\"folder-content\">\r\n                <FolderStructure\r\n                  nodes={node.children || []}\r\n                  onSelectFile={onSelectFile}\r\n                  currentPath={[...currentPath, node.name]}\r\n                  processOwners={processOwners}\r\n                  currentUser={currentUser}\r\n                  isAdmin={isAdmin}\r\n                  onDelete={onDelete}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n          );\r\n        } else {\r\n          // node.type === \"file\"\r\n          const filePath = [...currentPath, node.name].join(\"/\");\r\n          \r\n          // Ficheiros na raiz (nível 0) e dentro de pastas (nível 1) podem ser clicáveis\r\n          // Ficheiros em subpastas (nível 2+) NÃO podem ser clicáveis\r\n          const isClickableFile = currentPath.length <= 1;\r\n          \r\n          // Remove a extensão apenas para PDFs para manter compatibilidade\r\n          const displayName = node.name.endsWith('.pdf') ? node.name.slice(0, -4) : node.name;\r\n          \r\n          // Verifica se o usuário pode deletar o arquivo\r\n          const processOwnerString = processOwners[currentPath[0]];\r\n          const isProcessOwner = processOwnerString && processOwnerString.split(',').map(nome => nome.trim()).includes(currentUser);\r\n          const canDelete = isAdmin || isProcessOwner;\r\n          \r\n          return (\r\n            <div \r\n              key={node.name} \r\n              className={`file ${isClickableFile ? 'file-clickable' : ''}`}\r\n              onClick={isClickableFile ? () => onSelectFile(filePath) : undefined}\r\n              style={{ cursor: isClickableFile ? 'pointer' : 'default' }}\r\n            >\r\n              <span className=\"file-name\">{displayName}</span>\r\n              <div className=\"file-actions\">\r\n                {/* <button style={{ title:'Ver'}}><img src={Ver} alt=\"Ver\" style={{ width: '100%', height: '35px' }} /></button> */}\r\n                <FilePreviewButton file={node} currentPath={currentPath} />\r\n                {canDelete && (\r\n                  <DeleteButton \r\n                    file={node} \r\n                    currentPath={currentPath} \r\n                    onDelete={onDelete} \r\n                  />\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function SelecionarPdf() {\r\n  const [fileTree, setFileTree] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\"); \r\n  const [processOwners, setProcessOwners] = useState({});\r\n  const [showLogoutModal, setShowLogoutModal] = useState(false);\r\n  const navigate = useNavigate();\r\n  const { username, logout } = useContext(UserContext);\r\n\r\n  // Verifica se é SuperAdmin\r\n  const isAdmin = username === \"superadmin\" || username === \"SuperAdmin\";\r\n\r\n  // Função para fazer logout\r\n  const handleLogout = async () => {\r\n    setShowLogoutModal(true);\r\n  };\r\n\r\n  const confirmLogout = async () => {\r\n    setShowLogoutModal(false);\r\n    await logout();\r\n    navigate(\"/\", { replace: true });\r\n  };\r\n\r\n  const cancelLogout = () => {\r\n    setShowLogoutModal(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Busca a árvore de ficheiros\r\n    fetch(\"http://192.168.1.219:8080/files/list-files-tree\")\r\n      .then(res => res.json())\r\n      .then(setFileTree)\r\n      .catch(() => setFileTree([]));\r\n\r\n    // Busca os donos dos processos\r\n    fetch(\"http://192.168.1.219:8080/files/process-owners\")\r\n      .then(res => res.json())\r\n      .then(setProcessOwners)\r\n      .catch(() => setProcessOwners({}));\r\n  }, []);\r\n\r\n  // Função para recarregar a árvore de ficheiros após eliminação\r\n  const reloadFileTree = () => {\r\n    fetch(\"http://192.168.1.219:8080/files/list-files-tree\")\r\n      .then(res => res.json())\r\n      .then(setFileTree)\r\n      .catch(() => setFileTree([]));\r\n  };\r\n\r\n  const handleSelectFile = (filePath) => {\r\n    // Substituir espaços por '-', barras por '__'\r\n    const formattedPath = filePath.replace(/\\s/g, '-').replace(/\\//g, '__');\r\n    \r\n    // Determinar processo a partir do caminho do ficheiro\r\n    const pathParts = filePath.split('/');\r\n    const processName = pathParts[0]; // Assume que primeiro nível é o processo\r\n    \r\n    // Função utilitária para verificar se um usuário está na lista de donos do processo\r\n    const isUserProcessOwner = (processOwnerString, username) => {\r\n      if (!processOwnerString || !username) return false;\r\n      const donosArray = processOwnerString.split(',').map(nome => nome.trim()).filter(nome => nome);\r\n      return donosArray.includes(username);\r\n    };\r\n    \r\n    // Verificar se user pode editar este processo\r\n    const processOwner = processOwners[processName];\r\n    const canEdit = isAdmin || isUserProcessOwner(processOwner, username);\r\n    \r\n    navigate(`/file/${formattedPath}`, { \r\n      state: { \r\n        originalFilename: filePath,\r\n        canEdit: canEdit,\r\n        isSuperAdmin: isAdmin\r\n      } \r\n    });\r\n  };\r\n\r\n  // Filtra a árvore conforme o termo de busca\r\n  const filteredTree = filterTree(fileTree, searchTerm);\r\n\r\n  return (\r\n    <div className=\"file-container\">\r\n      <div className=\"header\">\r\n        <img src={Logo} alt=\"Logo\" className=\"logo\" />\r\n        <h2 className=\"title\">Magna ISO90001</h2>\r\n      </div>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Encontrar arquivo ou pasta...\"\r\n        value={searchTerm}\r\n        onChange={e => setSearchTerm(e.target.value)}\r\n      />\r\n      <div className=\"file-panel\">\r\n       <div className=\"panel-header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%' }}>\r\n        <div className=\"panel-title\">Índice</div>\r\n        <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n          {username && (\r\n            <span style={{ fontSize: '14px', color: '#666' }}>\r\n              Olá, {username}\r\n            </span>\r\n          )}\r\n          {isAdmin && (\r\n            <div className=\"admin-buttons\" style={{ display: 'flex', gap: '10px' }}>\r\n              <AddUserButton />\r\n              <AddProcessButton />\r\n            </div>\r\n          )}\r\n          <button \r\n            onClick={handleLogout}\r\n            style={{\r\n              padding: '8px 12px',\r\n              backgroundColor: '#dc3545',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontSize: '14px'\r\n            }}\r\n            onMouseOver={(e) => e.target.style.backgroundColor = '#c82333'}\r\n            onMouseOut={(e) => e.target.style.backgroundColor = '#dc3545'}\r\n          >\r\n            Sair\r\n          </button>\r\n        </div>\r\n      </div>\r\n        <FolderStructure \r\n          nodes={filteredTree} \r\n          onSelectFile={handleSelectFile} \r\n          processOwners={processOwners}\r\n          currentUser={username}\r\n          isAdmin={isAdmin}\r\n          onDelete={reloadFileTree}\r\n        />\r\n      </div>\r\n\r\n      {/* AI Assistant */}\r\n      <AIAssistant \r\n        fileTree={filteredTree}\r\n        searchTerm={searchTerm}\r\n        username={username}\r\n        isAdmin={isAdmin}\r\n        processOwners={processOwners}\r\n        onSuggestion={(suggestion) => {\r\n          console.log('AI Suggestion:', suggestion);\r\n        }}\r\n      />\r\n\r\n      {/* Modal de Confirmação de Logout */}\r\n      {showLogoutModal && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          zIndex: 1000,\r\n          animation: 'fadeIn 0.2s ease-out'\r\n        }}>\r\n          <div style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '12px',\r\n            padding: '24px',\r\n            minWidth: '320px',\r\n            maxWidth: '400px',\r\n            boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\r\n            animation: 'slideIn 0.3s ease-out',\r\n            textAlign: 'center'\r\n          }}>\r\n            <div style={{\r\n              fontSize: '48px',\r\n              marginBottom: '16px'\r\n            }}>\r\n              👋\r\n            </div>\r\n            <h3 style={{\r\n              margin: '0 0 8px 0',\r\n              fontSize: '18px',\r\n              fontWeight: '600',\r\n              color: '#1f2937'\r\n            }}>\r\n              Confirmar Saída\r\n            </h3>\r\n            <p style={{\r\n              margin: '0 0 24px 0',\r\n              color: '#6b7280',\r\n              fontSize: '14px',\r\n              lineHeight: '1.5'\r\n            }}>\r\n              Tem certeza que deseja terminar a sua sessão?\r\n            </p>\r\n            <div style={{\r\n              display: 'flex',\r\n              gap: '12px',\r\n              justifyContent: 'center'\r\n            }}>\r\n              <button\r\n                onClick={cancelLogout}\r\n                style={{\r\n                  padding: '10px 20px',\r\n                  backgroundColor: '#f3f4f6',\r\n                  color: '#374151',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  cursor: 'pointer',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500',\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n                onMouseOver={(e) => e.target.style.backgroundColor = '#e5e7eb'}\r\n                onMouseOut={(e) => e.target.style.backgroundColor = '#f3f4f6'}\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                onClick={confirmLogout}\r\n                style={{\r\n                  padding: '10px 20px',\r\n                  backgroundColor: '#dc3545',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  cursor: 'pointer',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500',\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n                onMouseOver={(e) => e.target.style.backgroundColor = '#c82333'}\r\n                onMouseOut={(e) => e.target.style.backgroundColor = '#dc3545'}\r\n              >\r\n                Sim, Sair\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Estilos para animações */}\r\n      <style jsx>{`\r\n        @keyframes fadeIn {\r\n          from { opacity: 0; }\r\n          to { opacity: 1; }\r\n        }\r\n        \r\n        @keyframes slideIn {\r\n          from { \r\n            opacity: 0;\r\n            transform: translateY(-20px) scale(0.95);\r\n          }\r\n          to { \r\n            opacity: 1;\r\n            transform: translateY(0) scale(1);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}