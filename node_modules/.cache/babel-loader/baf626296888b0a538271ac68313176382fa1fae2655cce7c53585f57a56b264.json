{"ast":null,"code":"import React from\"react\";import Bin from\"../../icons/bin.ico\";import{jsx as _jsx}from\"react/jsx-runtime\";const DeleteButton=_ref=>{let{file,currentPath,onDelete}=_ref;if(!file||!file.name){return null;// Retorna null se não houver arquivo ou nome\n}const handleDelete=async e=>{e.stopPropagation();// Evita trigger do onClick do div pai\n// Confirma se o utilizador quer realmente apagar o ficheiro\nconst confirmDelete=window.confirm(\"Tem a certeza que deseja eliminar o ficheiro \\\"\".concat(file.name,\"\\\"?\"));if(!confirmDelete){return;}try{const filePath=[...currentPath,file.name].join(\"/\");const response=await fetch(\"https://api-iso-9001.onrender.com/files/delete\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({filename:encodeURIComponent(filePath)})});if(!response.ok){throw new Error(\"Erro ao eliminar o arquivo\");}// Chama a função callback para atualizar a lista de ficheiros\nif(onDelete){onDelete(filePath);}alert(\"Ficheiro eliminado com sucesso!\");}catch(error){console.error(\"Erro ao eliminar o arquivo:\",error);alert(\"Erro ao eliminar o ficheiro. Tente novamente.\");}};return/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:handleDelete,style:{color:'white',border:'none',borderRadius:'4px',padding:'4px 8px',cursor:'pointer',fontSize:'12px'},title:\"Eliminar ficheiro\",children:/*#__PURE__*/_jsx(\"img\",{src:Bin,alt:\"Eliminar\",style:{width:'16px',height:'16px'}})});};export default DeleteButton;","map":{"version":3,"names":["React","Bin","jsx","_jsx","DeleteButton","_ref","file","currentPath","onDelete","name","handleDelete","e","stopPropagation","confirmDelete","window","confirm","concat","filePath","join","response","fetch","method","headers","body","JSON","stringify","filename","encodeURIComponent","ok","Error","alert","error","console","className","onClick","style","color","border","borderRadius","padding","cursor","fontSize","title","children","src","alt","width","height"],"sources":["C:/Users/António Gonçalves/Desktop/Magna-ISO9001-Frontend/src/components/Buttons/delete.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Bin from \"../../icons/bin.ico\"; \r\n\r\nconst DeleteButton = ({ file, currentPath, onDelete }) => {\r\n    if (!file || !file.name) {\r\n        return null; // Retorna null se não houver arquivo ou nome\r\n    }\r\n\r\n    const handleDelete = async (e) => {\r\n        e.stopPropagation(); // Evita trigger do onClick do div pai\r\n        \r\n        // Confirma se o utilizador quer realmente apagar o ficheiro\r\n        const confirmDelete = window.confirm(`Tem a certeza que deseja eliminar o ficheiro \"${file.name}\"?`);\r\n        \r\n        if (!confirmDelete) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const filePath = [...currentPath, file.name].join(\"/\");\r\n            \r\n            const response = await fetch(`https://api-iso-9001.onrender.com/files/delete`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({ filename: encodeURIComponent(filePath) }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(\"Erro ao eliminar o arquivo\");\r\n            }\r\n\r\n            // Chama a função callback para atualizar a lista de ficheiros\r\n            if (onDelete) {\r\n                onDelete(filePath);\r\n            }\r\n\r\n            alert(\"Ficheiro eliminado com sucesso!\");\r\n\r\n        } catch (error) {\r\n            console.error(\"Erro ao eliminar o arquivo:\", error);\r\n            alert(\"Erro ao eliminar o ficheiro. Tente novamente.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <button \r\n            className=\"delete-button\" \r\n            onClick={handleDelete}\r\n            style={{ \r\n                color: 'white', \r\n                border: 'none', \r\n                borderRadius: '4px', \r\n                padding: '4px 8px',\r\n                cursor: 'pointer',\r\n                fontSize: '12px'\r\n            }}\r\n            title=\"Eliminar ficheiro\"\r\n        >\r\n            <img src={Bin} alt=\"Eliminar\" style={{ width: '16px', height: '16px' }} /> \r\n        </button>\r\n    );\r\n};\r\n\r\nexport default DeleteButton;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,GAAG,KAAM,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEtC,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAqC,IAApC,CAAEC,IAAI,CAAEC,WAAW,CAAEC,QAAS,CAAC,CAAAH,IAAA,CACjD,GAAI,CAACC,IAAI,EAAI,CAACA,IAAI,CAACG,IAAI,CAAE,CACrB,MAAO,KAAI,CAAE;AACjB,CAEA,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC9BA,CAAC,CAACC,eAAe,CAAC,CAAC,CAAE;AAErB;AACA,KAAM,CAAAC,aAAa,CAAGC,MAAM,CAACC,OAAO,mDAAAC,MAAA,CAAkDV,IAAI,CAACG,IAAI,OAAI,CAAC,CAEpG,GAAI,CAACI,aAAa,CAAE,CAChB,OACJ,CAEA,GAAI,CACA,KAAM,CAAAI,QAAQ,CAAG,CAAC,GAAGV,WAAW,CAAED,IAAI,CAACG,IAAI,CAAC,CAACS,IAAI,CAAC,GAAG,CAAC,CAEtD,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,kDAAmD,CAC3EC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,QAAQ,CAAEC,kBAAkB,CAACV,QAAQ,CAAE,CAAC,CACnE,CAAC,CAAC,CAEF,GAAI,CAACE,QAAQ,CAACS,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,4BAA4B,CAAC,CACjD,CAEA;AACA,GAAIrB,QAAQ,CAAE,CACVA,QAAQ,CAACS,QAAQ,CAAC,CACtB,CAEAa,KAAK,CAAC,iCAAiC,CAAC,CAE5C,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDD,KAAK,CAAC,+CAA+C,CAAC,CAC1D,CACJ,CAAC,CAED,mBACI3B,IAAA,WACI8B,SAAS,CAAC,eAAe,CACzBC,OAAO,CAAExB,YAAa,CACtByB,KAAK,CAAE,CACHC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,OAAO,CAAE,SAAS,CAClBC,MAAM,CAAE,SAAS,CACjBC,QAAQ,CAAE,MACd,CAAE,CACFC,KAAK,CAAC,mBAAmB,CAAAC,QAAA,cAEzBxC,IAAA,QAAKyC,GAAG,CAAE3C,GAAI,CAAC4C,GAAG,CAAC,UAAU,CAACV,KAAK,CAAE,CAAEW,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAO,CAAE,CAAE,CAAC,CACtE,CAAC,CAEjB,CAAC,CAED,cAAe,CAAA3C,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}